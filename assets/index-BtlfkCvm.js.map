{"version":3,"file":"index-BtlfkCvm.js","sources":["../../src/main.ts"],"sourcesContent":["import './style.css'\r\n\r\nconst cep = document.querySelector<HTMLInputElement>('#cep')!\r\nconst logradouro = document.querySelector<HTMLInputElement>('#logradouro')!\r\nconst numero = document.querySelector<HTMLInputElement>('#numero')!\r\nconst bairro = document.querySelector<HTMLInputElement>('#bairro')!\r\nconst comboEstados = document.querySelector<HTMLSelectElement>('#comboEstados')!\r\nconst comboCidades = document.querySelector<HTMLSelectElement>('#comboCidades')!\r\n\r\n// Preencher o combo de estados\r\nasync function preencherComboEstados() {\r\n  const result = await fetch('https://servicodados.ibge.gov.br/api/v1/localidades/estados')\r\n  const body = await result.json()\r\n  comboEstados.innerHTML = '<option value=\"\">Selecione um estado</option>'\r\n  body.forEach((estado: { sigla: string; nome: string }) => {\r\n    const option = document.createElement('option')\r\n    option.value = estado.sigla\r\n    option.textContent = estado.nome\r\n    comboEstados.appendChild(option)\r\n  })\r\n}\r\n\r\n// Função para carregar cidades de um estado\r\nasync function carregarCidades(estadoSelecionado: string) {\r\n  const result = await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${estadoSelecionado}/municipios`)\r\n  const body = await result.json()\r\n  comboCidades.innerHTML = '<option value=\"\">Selecione uma cidade</option>'\r\n\r\n  body.forEach((cidade: { id: number; nome: string }) => {\r\n    const option = document.createElement('option')\r\n    option.value = cidade.id.toString()\r\n    option.textContent = cidade.nome\r\n    comboCidades.appendChild(option)\r\n  })\r\n\r\n  return body\r\n}\r\n\r\n// Preencher o combo de cidades COM BASE NO ESTADO SELECIONADO\r\ncomboEstados.addEventListener('change', async () => {\r\n  const estadoSelecionado = comboEstados.value\r\n  await carregarCidades(estadoSelecionado)\r\n})\r\n\r\npreencherComboEstados()\r\n\r\ncep.addEventListener('blur', () => {\r\n  consultarCep()\r\n})\r\n\r\nfunction limparFormulario() {\r\n  // cep.value = ''\r\n  logradouro.value = ''\r\n  numero.value = ''\r\n  bairro.value = ''\r\n  comboEstados.value = ''\r\n  comboCidades.innerHTML = '<option value=\"\">Selecione uma cidade</option>'\r\n}\r\n\r\nasync function consultarCep() {\r\n  const result = await fetch(`https://brasilapi.com.br/api/cep/v1/${cep.value}`)\r\n\r\n  const body = await result.json()\r\n\r\n  limparFormulario()\r\n\r\n  logradouro.value = body.street || ''\r\n  bairro.value = body.neighborhood || ''\r\n  if (body.state) {\r\n    comboEstados.value = body.state\r\n    await carregarCidades(body.state)\r\n\r\n    if (body.city) {\r\n      for (let i = 0; i < comboCidades.options.length; i++) {\r\n        const optionText = comboCidades.options[i].textContent || ''\r\n\r\n        if (optionText === body.city ||\r\n          optionText.includes(body.city) ||\r\n          body.city.includes(optionText)) {\r\n            comboCidades.selectedIndex = i\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  numero.focus()\r\n}\r\n\r\n"],"names":["cep","logradouro","numero","bairro","comboEstados","comboCidades","preencherComboEstados","body","estado","option","carregarCidades","estadoSelecionado","cidade","consultarCep","limparFormulario","i","optionText"],"mappings":"ssBAEA,MAAMA,EAAM,SAAS,cAAgC,MAAM,EACrDC,EAAa,SAAS,cAAgC,aAAa,EACnEC,EAAS,SAAS,cAAgC,SAAS,EAC3DC,EAAS,SAAS,cAAgC,SAAS,EAC3DC,EAAe,SAAS,cAAiC,eAAe,EACxEC,EAAe,SAAS,cAAiC,eAAe,EAG9E,eAAeC,GAAwB,CAE/B,MAAAC,EAAO,MADE,MAAM,MAAM,6DAA6D,GAC9D,KAAK,EAC/BH,EAAa,UAAY,gDACpBG,EAAA,QAASC,GAA4C,CAClD,MAAAC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQD,EAAO,MACtBC,EAAO,YAAcD,EAAO,KAC5BJ,EAAa,YAAYK,CAAM,CAAA,CAChC,CACH,CAGA,eAAeC,EAAgBC,EAA2B,CAElD,MAAAJ,EAAO,MADE,MAAM,MAAM,+DAA+DI,CAAiB,aAAa,GAC9F,KAAK,EAC/B,OAAAN,EAAa,UAAY,iDAEpBE,EAAA,QAASK,GAAyC,CAC/C,MAAAH,EAAS,SAAS,cAAc,QAAQ,EACvCA,EAAA,MAAQG,EAAO,GAAG,SAAS,EAClCH,EAAO,YAAcG,EAAO,KAC5BP,EAAa,YAAYI,CAAM,CAAA,CAChC,EAEMF,CACT,CAGAH,EAAa,iBAAiB,SAAU,SAAY,CAClD,MAAMO,EAAoBP,EAAa,MACvC,MAAMM,EAAgBC,CAAiB,CACzC,CAAC,EAEDL,EAAsB,EAEtBN,EAAI,iBAAiB,OAAQ,IAAM,CACpBa,EAAA,CACf,CAAC,EAED,SAASC,GAAmB,CAE1Bb,EAAW,MAAQ,GACnBC,EAAO,MAAQ,GACfC,EAAO,MAAQ,GACfC,EAAa,MAAQ,GACrBC,EAAa,UAAY,gDAC3B,CAEA,eAAeQ,GAAe,CAGtB,MAAAN,EAAO,MAFE,MAAM,MAAM,uCAAuCP,EAAI,KAAK,EAAE,GAEnD,KAAK,EAM/B,GAJiBc,EAAA,EAENb,EAAA,MAAQM,EAAK,QAAU,GAC3BJ,EAAA,MAAQI,EAAK,cAAgB,GAChCA,EAAK,QACPH,EAAa,MAAQG,EAAK,MACpB,MAAAG,EAAgBH,EAAK,KAAK,EAE5BA,EAAK,MACP,QAASQ,EAAI,EAAGA,EAAIV,EAAa,QAAQ,OAAQU,IAAK,CACpD,MAAMC,EAAaX,EAAa,QAAQU,CAAC,EAAE,aAAe,GAE1D,GAAIC,IAAeT,EAAK,MACtBS,EAAW,SAAST,EAAK,IAAI,GAC7BA,EAAK,KAAK,SAASS,CAAU,EAAG,CAC9BX,EAAa,cAAgBU,EAC/B,KAAA,CACF,CAKNb,EAAO,MAAM,CACf"}